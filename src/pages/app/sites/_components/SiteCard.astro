---
import placeholderImage from "@/assets/placeholder.png";
import { Image } from "astro:assets";
import type { Site } from "@/db/schema";
interface Props {
  site: Site;
}
const { site } = Astro.props;
const { subdomain } = site;
const url = `${subdomain}.${import.meta.env.PUBLIC_ROOT_DOMAIN}`;
---

<div
  class="relative rounded-lg border border-stone-200 pb-10 shadow-md transition-all hover:shadow-xl"
>
  <a
    href={`/sites/${site.id}`}
    class="flex flex-col overflow-hidden rounded-lg"
  >
    <Image
      src={placeholderImage}
      width={500}
      height={400}
      alt="Upload your own image under /settings"
    />
    <div class="border-t border-stone-200 p-4 dark:border-stone-700">
      <h3
        class="my-0 truncate font-cal text-xl font-bold tracking-wide dark:text-white"
      >
        {site.name}
      </h3>
      <p
        class="mt-2 line-clamp-1 text-sm font-normal leading-snug text-stone-500 dark:text-stone-400"
      >
        {site.description}
      </p>
    </div>
  </a>
  <div class="absolute bottom-4 flex w-full justify-between space-x-4 px-4">
    <a
      href={`${Astro.url.protocol}//${url}`}
      target="_blank"
      rel="noreferrer"
      class="truncate rounded-md bg-stone-100 px-2 py-1 text-sm font-medium text-stone-600 transition-colors hover:bg-stone-200 dark:bg-stone-800 dark:text-stone-400 dark:hover:bg-stone-700"
    >
      {url}
    </a>
  </div>
</div>
